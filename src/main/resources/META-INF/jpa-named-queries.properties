FlowInfo.findByDates=\
SELECT C.FLOW_ID, C.CIKEY, C.ECID, C.COMPOSITE_NAME, C.COMPOSITE_REVISION, C.COMPONENTTYPE, C.CREATION_DATE, C.MODIFY_DATE, S.ACTIVE_COMPONENT_INSTANCES, S.UNHANDLED_FAULTS, S.RECOVERABLE_FAULTS \
FROM CUBE_INSTANCE C, SCA_FLOW_INSTANCE S \
WHERE C.CIKEY  IN  \
  ( \
    SELECT MIN(CI.CIKEY) \
    FROM CUBE_INSTANCE CI \
    WHERE \
    CI.CREATION_DATE >= ?1 \
    AND CI.CREATION_DATE <= ?2 \
    GROUP BY CI.FLOW_ID \
  ) \
AND S.FLOW_ID = C.FLOW_ID \
AND ( ('running' = ?3 AND S.ACTIVE_COMPONENT_INSTANCES > 0) OR ('terminated' = ?3 AND S.ACTIVE_COMPONENT_INSTANCES = 0) OR ('all' = ?3)) \
AND ( ('faulted' = ?4 AND (S.UNHANDLED_FAULTS > 0 OR S.RECOVERABLE_FAULTS > 0)) OR ('not_faulted' = ?4 AND (S.UNHANDLED_FAULTS = 0 AND S.RECOVERABLE_FAULTS = 0)) OR ('all' = ?4)) \
ORDER BY C.CREATION_DATE DESC \
OFFSET ?5 ROWS FETCH NEXT ?6 ROWS ONLY

FlowInfo.findByFlowIdAndDates=\
SELECT C.FLOW_ID, C.CIKEY, C.ECID, C.COMPOSITE_NAME, C.COMPOSITE_REVISION, C.COMPONENTTYPE, C.CREATION_DATE, C.MODIFY_DATE, S.ACTIVE_COMPONENT_INSTANCES, S.UNHANDLED_FAULTS, S.RECOVERABLE_FAULTS \
FROM CUBE_INSTANCE C, SCA_FLOW_INSTANCE S \
WHERE C.CIKEY  IN  \
  ( \
    SELECT MIN(CI.CIKEY) \
    FROM CUBE_INSTANCE CI \
    WHERE \
    CI.FLOW_ID = ?1 \
    AND CI.CREATION_DATE >= ?2 \
    AND CI.CREATION_DATE <= ?3 \
    GROUP BY CI.FLOW_ID \
  ) \
AND S.FLOW_ID = C.FLOW_ID \
AND ( ('running' = ?4 AND s.ACTIVE_COMPONENT_INSTANCES > 0) OR ('terminated' = ?4 AND s.ACTIVE_COMPONENT_INSTANCES = 0) OR ('all' = ?4)  ) \
AND ( ('faulted' = ?5 AND (S.UNHANDLED_FAULTS > 0 OR S.RECOVERABLE_FAULTS > 0)) OR ('not_faulted' = ?5 AND (S.UNHANDLED_FAULTS = 0 AND S.RECOVERABLE_FAULTS = 0)) OR ('all' = ?5)  ) \
ORDER BY C.CREATION_DATE DESC \
OFFSET ?6 ROWS FETCH NEXT ?7 ROWS ONLY

FlowInfo.findByCikeyAndDates=\
SELECT C.FLOW_ID, C.CIKEY, C.ECID, C.COMPOSITE_NAME, C.COMPOSITE_REVISION, C.COMPONENTTYPE, C.CREATION_DATE, C.MODIFY_DATE, S.ACTIVE_COMPONENT_INSTANCES, S.UNHANDLED_FAULTS, S.RECOVERABLE_FAULTS \
FROM CUBE_INSTANCE C, SCA_FLOW_INSTANCE S \
WHERE C.CIKEY  IN  \
  ( \
    SELECT CI.CIKEY \
    FROM CUBE_INSTANCE CI \
    WHERE \
    CI.CIKEY = ?1 \
    AND CI.CREATION_DATE >= ?2 \
    AND CI.CREATION_DATE <= ?3 \
  ) \
AND S.FLOW_ID = C.FLOW_ID \
AND ( ('running' = ?4 AND s.ACTIVE_COMPONENT_INSTANCES > 0) OR ('terminated' = ?4 AND s.ACTIVE_COMPONENT_INSTANCES = 0) OR ('all' = ?4)  ) \
AND ( ('faulted' = ?5 AND (S.UNHANDLED_FAULTS > 0 OR S.RECOVERABLE_FAULTS > 0)) OR ('not_faulted' = ?5 AND (S.UNHANDLED_FAULTS = 0 AND S.RECOVERABLE_FAULTS = 0)) OR ('all' = ?5)  ) \
ORDER BY C.CREATION_DATE DESC \
OFFSET ?6 ROWS FETCH NEXT ?7 ROWS ONLY

FlowInfo.findByEcidAndDates=\
SELECT C.FLOW_ID, C.CIKEY, C.ECID, C.COMPOSITE_NAME, C.COMPOSITE_REVISION, C.COMPONENTTYPE, C.CREATION_DATE, C.MODIFY_DATE, S.ACTIVE_COMPONENT_INSTANCES, S.UNHANDLED_FAULTS, S.RECOVERABLE_FAULTS \
FROM CUBE_INSTANCE C, SCA_FLOW_INSTANCE S \
WHERE C.CIKEY  IN  \
  ( \
    SELECT MIN(CI.CIKEY) \
    FROM CUBE_INSTANCE CI \
    WHERE \
    CI.ECID = ?1 \
    AND CI.CREATION_DATE >= ?2 \
    AND CI.CREATION_DATE <= ?3 \
    GROUP BY CI.ECID \
  ) \
AND S.FLOW_ID = C.FLOW_ID \
AND ( ('running' = ?4 AND s.ACTIVE_COMPONENT_INSTANCES > 0) OR ('terminated' = ?4 AND s.ACTIVE_COMPONENT_INSTANCES = 0) OR ('all' = ?4)  ) \
AND ( ('faulted' = ?5 AND (S.UNHANDLED_FAULTS > 0 OR S.RECOVERABLE_FAULTS > 0)) OR ('not_faulted' = ?5 AND (S.UNHANDLED_FAULTS = 0 AND S.RECOVERABLE_FAULTS = 0)) OR ('all' = ?5)  ) \
ORDER BY C.CREATION_DATE DESC \
OFFSET ?6 ROWS FETCH NEXT ?7 ROWS ONLY

FlowInfo.findByNameAndDates=\
 SELECT C.FLOW_ID, C.CIKEY, C.ECID, C.COMPOSITE_NAME, C.COMPOSITE_REVISION, C.COMPONENTTYPE, C.CREATION_DATE, C.MODIFY_DATE, S.ACTIVE_COMPONENT_INSTANCES, S.UNHANDLED_FAULTS, S.RECOVERABLE_FAULTS \
FROM CUBE_INSTANCE C, SCA_FLOW_INSTANCE S \
WHERE C.CIKEY  IN  \
  ( \
    SELECT MIN(CI.CIKEY) \
    FROM CUBE_INSTANCE CI \
    WHERE \
    CI.COMPOSITE_NAME = ?1 \
    AND CI.COMPOSITE_REVISION = ?2 \
    AND CI.CREATION_DATE >= ?3 \
    AND CI.CREATION_DATE <= ?4 \
    GROUP BY CI.FLOW_ID \
  ) \
AND S.FLOW_ID = C.FLOW_ID \
AND ( ('running' = ?5 AND s.ACTIVE_COMPONENT_INSTANCES > 0) OR ('terminated' = ?5 AND s.ACTIVE_COMPONENT_INSTANCES = 0) OR ('all' = ?5)  ) \
AND ( ('faulted' = ?6 AND (S.UNHANDLED_FAULTS > 0 OR S.RECOVERABLE_FAULTS > 0)) OR ('not_faulted' = ?6 AND (S.UNHANDLED_FAULTS = 0 AND S.RECOVERABLE_FAULTS = 0)) OR ('all' = ?6)  ) \
ORDER BY C.CREATION_DATE DESC \
OFFSET ?7 ROWS FETCH NEXT ?8 ROWS ONLY

FlowInfo.findBySensorAndDates=\
SELECT C.FLOW_ID, C.CIKEY, C.ECID, C.COMPOSITE_NAME, C.COMPOSITE_REVISION, C.COMPONENTTYPE, C.CREATION_DATE, C.MODIFY_DATE, S.ACTIVE_COMPONENT_INSTANCES, S.UNHANDLED_FAULTS, S.RECOVERABLE_FAULTS \
FROM CUBE_INSTANCE C, SCA_FLOW_INSTANCE S \
WHERE C.CIKEY  IN  \
  ( \
    SELECT SSN.CIKEY \
    FROM SCA_SENSOR_VALUE SSN \
    WHERE SSN.SENSOR_NAME =?1 \
    AND (TO_CHAR(SSN.NUMBER_VALUE)=?2 OR TO_CHAR(SSN.STRING_VALUE)=?2) \
    AND SSN.PARTITION_DATE >= ?3 \
    AND SSN.PARTITION_DATE < ?4 \
  ) \
AND S.FLOW_ID = C.FLOW_ID \
AND ( ('running' = ?5 AND s.ACTIVE_COMPONENT_INSTANCES > 0) OR ('terminated' = ?5 AND s.ACTIVE_COMPONENT_INSTANCES = 0) OR ('all' = ?5)  ) \
AND ( ('faulted' = ?6 AND (S.UNHANDLED_FAULTS > 0 OR S.RECOVERABLE_FAULTS > 0)) OR ('not_faulted' = ?6 AND (S.UNHANDLED_FAULTS = 0 AND S.RECOVERABLE_FAULTS = 0)) OR ('all' = ?6)  ) \
ORDER BY C.CREATION_DATE DESC \
OFFSET ?7 ROWS FETCH NEXT ?8 ROWS ONLY

SensorInfo.findBySensorNames=\
SELECT DISTINCT SENSOR_NAME, FIRST_VALUE(CIKEY) OVER (ORDER BY CIKEY ASC) as CIKEY, \
FIRST_VALUE(FLOW_ID) OVER (ORDER BY FLOW_ID ASC) as FLOW_ID, \
FIRST_VALUE(COMPONENT_NAME) OVER (ORDER BY COMPONENT_NAME ASC) as COMPONENT_NAME \
FROM SCA_SENSOR_VALUE WHERE PARTITION_DATE > SYSDATE-4 AND VALUE_TYPE<>2005

SensorInfo.findByCikey=SELECT FLOW_ID, CIKEY, COMPONENT_NAME, SENSOR_NAME, CASE VALUE_TYPE WHEN 2 THEN TO_CHAR(NUMBER_VALUE) WHEN 12 THEN TO_CHAR(STRING_VALUE) WHEN 2005 THEN TO_CHAR(dbms_lob.substr( CLOB_VALUE, 4000, 1 )) ELSE '' END SENSOR_VALUE \
FROM SCA_SENSOR_VALUE \
WHERE CIKEY = ?1
